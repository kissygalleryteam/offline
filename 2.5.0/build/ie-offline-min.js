define('kg/offline/2.5.0/ie-offline',["util","json"],function(require, exports, module) {var e,t,n,r=require("util"),i=require("json"),a={},s=document,u=(new Date).getTime(),o="IE-OFFLINE",l="IE-SINGLE-KEY",f="TIME-DEADLINE";r.mix(a,{init:function(){return e=s.createElement("link"),e.addBehavior&&(e.style.behavior="url(#default#userData)",s.getElementsByTagName("head")[0].appendChild(e)),e.load(o),t=i.parse(e.getAttribute(l))||{},n=i.parse(e.getAttribute(f))||{},this._initDeadline(),this},_initDeadline:function(){var e,t;for(var r in n)n.hasOwnProperty(r)&&(e=parseInt(n[r],10),t=e-u,0>=t?this.removeItem(r):this._deadlineKey(r,t))},setItem:function(e,r,i){if(t[e]=r,i){var a=parseInt(i,10),s=(new Date).getTime();n[e]=a+s,this._deadlineKey(e,a)}return this._saveToBrowser()},getItem:function(e){return t[e]},removeItem:function(e){return delete t[e],delete n[e],this._saveToBrowser()},clear:function(){return t={},n={},this._saveToBrowser()},size:function(){var e=0;for(var n in t)t.hasOwnProperty(n)&&e++;return e},timeRemain:function(e){return e in t?e in n?n[e]-(new Date).getTime():-1:0},usedByte:function(){var e=0,r=i.stringify(n);return""!==n&&(e+=r.length+f.length),e+=i.stringify(t).length},getAll:function(e){return e?t:i.stringify(t)},_deadlineKey:function(e,t){var n=this;r.later(function(){n.removeItem(e)},t)},_saveToBrowser:function(){var r=!0;try{e.setAttribute(f,i.stringify(n)),e.setAttribute(l,i.stringify(t)),e.save(o)}catch(a){r=!1}return r}}),module.exports=a;});